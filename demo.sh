#!/bin/bash

# Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÐµÐ¹ go-cli
# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ: ./demo.sh

echo "=== Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÐµÐ¹ go-cli ==="
echo

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼, Ñ‡Ñ‚Ð¾ Ð¿Ñ€Ð¾ÐµÐºÑ‚ ÑÐ¾Ð±Ñ€Ð°Ð½
if [ ! -f "./go-cli" ]; then
    echo "Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°..."
    go build -o go-cli ./cmd/go-cli
    if [ $? -ne 0 ]; then
        echo "ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ±Ð¾Ñ€ÐºÐ¸!"
        exit 1
    fi
fi
echo "âœ“ ÐŸÑ€Ð¾ÐµÐºÑ‚ Ð³Ð¾Ñ‚Ð¾Ð²"
echo

echo "ðŸŽ¯ Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ 1: Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹"
echo "----------------------------------------"
echo "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: echo 'ÐŸÑ€Ð¸Ð²ÐµÑ‚, Ð¼Ð¸Ñ€!'"
echo "echo 'ÐŸÑ€Ð¸Ð²ÐµÑ‚, Ð¼Ð¸Ñ€!'" | ./go-cli
echo

echo "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: pwd"
echo "pwd" | ./go-cli
echo

echo "ðŸŽ¯ Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ 2: Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð¿Ð°Ð¹Ð¿Ð°Ð¼Ð¸"
echo "----------------------------------------"
echo "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: echo 'hello world' | wc"
echo "echo 'hello world' | wc" | ./go-cli
echo

echo "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: echo 'hello world' | wc -w (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ»Ð¾Ð²Ð°)"
echo "echo 'hello world' | wc -w" | ./go-cli
echo

echo "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: pwd | wc (Ð¿Ð¾Ð´ÑÑ‡ÐµÑ‚ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð² Ð² Ð¿ÑƒÑ‚Ð¸)"
echo "pwd | wc" | ./go-cli
echo

echo "ðŸŽ¯ Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ 3: ÐŸÐ¾Ð´ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ"
echo "----------------------------------------"
echo "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: echo \$HOME"
echo 'echo $HOME' | ./go-cli
echo

echo "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: echo \${PATH}"
echo 'echo ${PATH}' | ./go-cli
echo

echo "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: echo ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ \$USER Ð¶Ð¸Ð²ÐµÑ‚ Ð² \$HOME"
echo 'echo ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ $USER Ð¶Ð¸Ð²ÐµÑ‚ Ð² $HOME' | ./go-cli
echo

echo "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: echo \$UNDEFINED (Ð½ÐµÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰Ð°Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ)"
echo 'echo $UNDEFINED' | ./go-cli
echo

echo "ðŸŽ¯ Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ 4: Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ñ„Ð°Ð¹Ð»Ð°Ð¼Ð¸"
echo "----------------------------------------"
# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ñ‚ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ Ñ„Ð°Ð¹Ð»
echo "Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð³Ð¾ Ñ„Ð°Ð¹Ð»Ð°..."
cat > demo_file.txt << EOF
Ð¡Ñ‚Ñ€Ð¾ÐºÐ° 1
Ð¡Ñ‚Ñ€Ð¾ÐºÐ° 2
Ð¡Ñ‚Ñ€Ð¾ÐºÐ° 3
EOF

echo "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: cat demo_file.txt"
echo "cat demo_file.txt" | ./go-cli
echo

echo "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð°: cat demo_file.txt | wc"
echo "cat demo_file.txt | wc" | ./go-cli
echo

echo "ðŸŽ¯ Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ 5: Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼"
echo "----------------------------------------"
echo "Ð—Ð°Ð¿ÑƒÑÐº Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ð³Ð¾ Ñ€ÐµÐ¶Ð¸Ð¼Ð° Ñ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ð¼Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°Ð¼Ð¸:"
cat > interactive_demo.txt << EOF
echo Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² go-cli!
pwd
echo Ð¢ÐµÐºÑƒÑ‰Ð°Ñ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ Ð²Ñ‹ÑˆÐµ
echo hello world | wc
exit
EOF

echo "Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´ Ð¸Ð· Ñ„Ð°Ð¹Ð»Ð°:"
cat interactive_demo.txt
echo
echo "Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:"
./go-cli < interactive_demo.txt
echo

# ÐžÑ‡Ð¸ÑÑ‚ÐºÐ°
rm -f demo_file.txt interactive_demo.txt

echo "ðŸŽ‰ Ð”ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°!"
echo "=========================="
echo "go-cli Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚:"
echo "âœ“ Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ (echo, pwd, cat, wc)"
echo "âœ“ ÐŸÐ°Ð¹Ð¿Ñ‹ (command1 | command2)"
echo "âœ“ ÐŸÐ¾Ð´ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÑƒ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ (\$VAR, \${VAR})"
echo "âœ“ Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ Ñ€ÐµÐ¶Ð¸Ð¼"
echo "âœ“ ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ Ð¾ÑˆÐ¸Ð±Ð¾Ðº"
echo "âœ“ Ð’Ñ‹ÑÐ¾ÐºÑƒÑŽ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ"
echo
echo "Ð”Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð¸Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ð³Ð¾ Ñ€ÐµÐ¶Ð¸Ð¼Ð°:"
echo "  ./go-cli"
echo
echo "Ð”Ð»Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´ Ð¸Ð· stdin:"
echo "  echo 'pwd' | ./go-cli"
echo "  echo 'echo hello | wc' | ./go-cli"
