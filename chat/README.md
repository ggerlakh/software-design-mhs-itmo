# 💬 Chat CLI

Чат с комнатами и паролями для общения по сети.

## Возможности

- Создание комнат с паролем
- Вход в существующие комнаты (3 попытки на пароль)
- Список пользователей в комнате
- Автоматическое удаление пустых комнат

## Архитектура

```
┌─────────────────────┐         ┌─────────────────┐
│   Сервер            │         │   Клиент 1      │
│   158.160.218.84    │◄───────►│                 │
└─────────────────────┘   TCP   └─────────────────┘
         ▲
         │ TCP
         ▼
┌─────────────────┐
│   Клиент N      │
└─────────────────┘
```

## Структура проекта

```
chat/
├── main.go                      # Точка входа
├── Makefile
├── go.mod
└── internal/
    ├── server/
    │   ├── server.go            # Server struct, Start()
    │   ├── protocol.go          # Протокол: send(), askInput()
    │   ├── room.go              # Room, Client structs
    │   ├── session.go           # Обработка соединений
    │   ├── menu.go              # Главное меню, создание/вход
    │   ├── command.go           # Команды /quit, /users, /menu
    │   └── broadcast.go         # Рассылка сообщений
    └── client/
        ├── client.go            # Client struct, connect()
        ├── protocol.go          # Константы протокола
        └── session.go           # Обработка сессии
```

## Быстрый старт

```bash
make build        # Собрать
make run-server   # Запустить сервер
make run-client   # Запустить клиент (в другом терминале)
make clean        # Удалить бинарник
```

## Подключение к серверу

```bash
make build
./chat -mode=client -host=158.160.218.84 -port=8080
```

## Команды в чате

| Команда | Описание |
|---------|----------|
| `/quit` | Выйти из чата |
| `/users` | Список пользователей в комнате |
| `/menu` | Вернуться в главное меню |

## Пример сессии

**Сервер (158.160.218.84):**
```
$ ./chat -mode=server -port=8080

╔══════════════════════════════════════╗
║          🖥️  РЕЖИМ СЕРВЕРА           ║
╚══════════════════════════════════════╝
🚀 Сервер запущен на порту 8080
Ожидание подключений...
[12:30:00] Комната 'dev-chat' создана
[12:30:00][dev-chat] Alice подключился (1)
[12:30:15][dev-chat] Bob подключился (2)
[12:30:20][dev-chat][Alice] Привет!
```

**Клиент:**
```
$ ./chat -mode=client -host=158.160.218.84 -port=8080

╔══════════════════════════════════════╗
║          💻 РЕЖИМ КЛИЕНТА            ║
╚══════════════════════════════════════╝
🔗 Подключено к 158.160.218.84:8080

╔════════════════════════════════════╗
║         🏠 ГЛАВНОЕ МЕНЮ            ║
╠════════════════════════════════════╣
║  1. Создать комнату                ║
║  2. Присоединиться к комнате       ║
╚════════════════════════════════════╝
Введите 1 или 2: 1

📝 СОЗДАНИЕ КОМНАТЫ
Введите название комнаты: dev-chat
Введите пароль для комнаты: secret
Введите ваш никнейм: Alice

✅ Вы в комнате 'dev-chat' как Alice
Команды: /quit, /users, /menu
─────────────────────────────────────
[12:30:15] 📢 Bob присоединился к комнате
[12:30:20][Alice] Привет!
[12:30:25][Bob] Привет!
```
