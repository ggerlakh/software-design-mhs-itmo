# go-cli - –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

[![Tests](https://github.com/ggerlakh/software-design-mhs-itmo/actions/workflows/tests.yml/badge.svg?branch=main)](https://github.com/ggerlakh/software-design-mhs-itmo/actions/workflows/tests.yml)
[![Linter](https://github.com/ggerlakh/software-design-mhs-itmo/actions/workflows/lint.yml/badge.svg?branch=main)](https://github.com/ggerlakh/software-design-mhs-itmo/actions/workflows/lint.yml)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Go Version](https://img.shields.io/badge/Go-1.25.1-blue.svg)](https://golang.org/)

–ü—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –Ω–∞ Go, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã, –ø–∞–π–ø—ã –∏ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã**: `echo`, `pwd`, `cat`, `wc`, `grep`, `exit`
- **–ü–∞–π–ø—ã**: `command1 | command2` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤—ã–≤–æ–¥–∞ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏
- **–ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**: `$VAR` –∏ `${VAR}` –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º**: —Ä–∞–±–æ—Ç–∞ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –æ–±–æ–ª–æ—á–∫–µ
- **–í–Ω–µ—à–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥, –Ω–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –≤ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã

### echo
–í—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —ç–∫—Ä–∞–Ω.
```bash
echo hello world
echo -n hello world  # –±–µ–∑ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏
```

### pwd
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.
```bash
pwd
```

### cat
–ß–∏—Ç–∞–µ—Ç –∏ –≤—ã–≤–æ–¥–∏—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ stdin.
```bash
cat file.txt
cat  # —á–∏—Ç–∞–µ—Ç –∏–∑ stdin
```

### wc
–ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫–∏, —Å–ª–æ–≤–∞ –∏ –±–∞–π—Ç—ã.
```bash
wc file.txt
wc -l  # —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–∏
wc -w  # —Ç–æ–ª—å–∫–æ —Å–ª–æ–≤–∞
wc -c  # —Ç–æ–ª—å–∫–æ –±–∞–π—Ç—ã
```

### exit
–ó–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞.
```bash
exit
```

### grep
–ü–æ–∏—Å–∫ —Å—Ç—Ä–æ–∫, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é.
```bash
grep "pattern" file.txt          # –ø–æ–∏—Å–∫ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –≤ —Ñ–∞–π–ª–µ
grep -i "pattern" file.txt       # —Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫
grep -w "word" file.txt          # –ø–æ–∏—Å–∫ —Å–ª–æ–≤–∞ —Ü–µ–ª–∏–∫–æ–º
grep -A 3 "pattern" file.txt     # –ø–µ—á–∞—Ç—å 3 —Å—Ç—Ä–æ–∫ –ø–æ—Å–ª–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
grep "^start" file.txt           # —Å—Ç—Ä–æ–∫–∏, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å "start"
grep "end$" file.txt             # —Å—Ç—Ä–æ–∫–∏, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ "end"
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–ª–∞–≥–∏:**
- `-i` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫ (case-insensitive)
- `-w` ‚Äî –ø–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ —Å–ª–æ–≤–∞ —Ü–µ–ª–∏–∫–æ–º (word match)
- `-A N` ‚Äî –ø–µ—á–∞—Ç–∞—Ç—å N —Å—Ç—Ä–æ–∫ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –§–ª–∞–≥ `-w` –∏—â–µ—Ç –ø–æ–¥—Å—Ç—Ä–æ–∫–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ "non-word constituent character" (–Ω–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏–ª–∏ `_`)
- –ü—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –æ–±–ª–∞—Å—Ç–µ–π –ø–µ—á–∞—Ç–∏ (—Ñ–ª–∞–≥ `-A`) –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –ø–µ—á–∞—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è Go (RE2): `.`, `*`, `+`, `?`, `^`, `$`, `[abc]`, `(...)`, `|`

## üîó –ü–∞–π–ø—ã

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞—á–∞ –≤—ã–≤–æ–¥–∞ –º–µ–∂–¥—É –∫–æ–º–∞–Ω–¥–∞–º–∏ —á–µ—Ä–µ–∑ —Å–∏–º–≤–æ–ª `|`:

```bash
echo hello world | wc        # –ø–æ–¥—Å—á–µ—Ç —Å–ª–æ–≤ –≤ –≤—ã–≤–æ–¥–µ echo
pwd | wc                     # –ø–æ–¥—Å—á–µ—Ç —Å–∏–º–≤–æ–ª–æ–≤ –≤ –ø—É—Ç–∏
echo hello world | wc -w     # —Ç–æ–ª—å–∫–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤
cat file.txt | wc -l         # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ —Ñ–∞–π–ª–µ
```

## üí° –ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –¥–≤—É—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:

```bash
echo $HOME              # –ø—Ä–æ—Å—Ç–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞
echo ${PATH}            # –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö
echo $USER –∂–∏–≤–µ—Ç –≤ $HOME  # –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞
```

–ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –æ–Ω–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–π:
```bash
echo $UNDEFINED         # –≤—ã–≤–µ–¥–µ—Ç: $UNDEFINED
```

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –°–±–æ—Ä–∫–∞
```bash
go build -o go-cli ./cmd/go-cli
```

### –ó–∞–ø—É—Å–∫
```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
./go-cli

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏–∑ stdin
echo "pwd" | ./go-cli

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–∞–π–ø–∞
echo "echo hello world | wc" | ./go-cli
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–º–æ-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π:
```bash
./demo.sh
```

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
$ echo "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"
–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!

$ pwd
/Users/user/project

$ echo hello world | wc
1 2 12
```

### –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
```bash
$ cat file.txt
–°—Ç—Ä–æ–∫–∞ 1
–°—Ç—Ä–æ–∫–∞ 2
–°—Ç—Ä–æ–∫–∞ 3

$ cat file.txt | wc
3 6 45
```

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
```bash
$ ./go-cli
Welcome to go-cli! To esacpe type "exit".
> echo hello world
hello world
> pwd
/Users/user/project
> echo hello world | wc
1 2 12
> exit
```
## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ cmd/go-cli/           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ commands/         # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ (echo, cat, wc, grep, pwd, exit)
‚îÇ   ‚îú‚îÄ‚îÄ executor/         # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –∏ –ø–∞–π–ø–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ interpreter/      # –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä (REPL)
‚îÇ   ‚îú‚îÄ‚îÄ parser/           # –ü–∞—Ä—Å–µ—Ä –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ preprocessor/     # –ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ (–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
‚îÇ   ‚îú‚îÄ‚îÄ checkutils/       # –£—Ç–∏–ª–∏—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îî‚îÄ‚îÄ errors/           # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—à–∏–±–∫–∏
‚îú‚îÄ‚îÄ docs/                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
‚îú‚îÄ‚îÄ demo.sh               # –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞
```bash
golangci-lint run
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–æ–º–∞–Ω–¥—ã
1. –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Ä–µ–∞–ª–∏–∑—É—é—â—É—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `BuiltinCommand`
2. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤ —Å–ø–∏—Å–æ–∫ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
3. –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Parser**: —Ä–∞–∑–±–∏—Ä–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏ –ø–∞–π–ø—ã
- **Executor**: –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–∞–π–ø—ã
- **Commands**: —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
- **Interpreter**: –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–æ—Å—Ç—É–ø–Ω–æ –≤ [cli-docs/architecture.md](../cli-docs/architecture.md).

### –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å—Ç–∏–ª—é –∫–æ–¥–∞
- –°–ª–µ–¥—É–π—Ç–µ [Effective Go](https://golang.org/doc/effective_go)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `gofmt` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ —Ç–∏–ø–æ–≤
- –ü–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 50%

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
```bash
go test ./internal/... -v
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
```bash
go test ./internal/... -cover
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ [MIT License](LICENSE.TXT).
